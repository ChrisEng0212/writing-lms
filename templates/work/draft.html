{% extends "layout.html" %}

{% block content %}

<div id="vue-app"> 

    <div class="list-section">
        <h1 style="display:inline"> First Draft </h1> 
        <h1 id="unit" style="display:inline">{{unit}}</h1>
        <br><br>
        
        
        <div v-for="(input, key, index) in draftOBJ"> 

            <legend>[[ key ]]</legend> 

            <div v-if="planOBJ[index][0].length > 0">
                <span :style="theme" > [[ planOBJ[index][0] ]]  </span>  
                <span > - [[ planOBJ[index][1] ]] </span> <br> <br>
            </div>  

            <textarea v-if="input.length > 0"  class="input3" v-bind:id="key" :ref="key" v-on:focus="selectText(key)" v-on:blur="deSelect(key, index)" v-model="input" ></textarea>
            <textarea v-else  class="input1" v-bind:id="key" :ref="key" v-on:focus="selectText(key)" v-on:blur="deSelect(key, index)" v-model="input" placeholder="...."></textarea> 
            
            <div v-if="control[index]" >
                <template v-for="item in control[index]">
                    <button type="button" class="btn btn-sm btn-outline-warning" style="margin-right: 5px" v-on:click="controller(item)">"[[item]]" tips</button>  
                </template>
                <template v-for="item in control[index]">                    
                   <div v-if="btn_control[item]">                    
                            <div class="frame-section embed-responsive embed-responsive-4by3">
                                <iframe :src="slides[item]"
                                    allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true">
                                </iframe>
                            </div> 
                    </div>                    
                </template>
            </div> 
        
        </div> 

        <br>
        <button class="btn btn-info" v-on:click="readRefs"> SAVE </button>   

        </div>  

</div> <!-- end of Vue app -->


{% endblock %}

{% block script %}  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
<script type="text/javascript" src="{{url_for('static', filename= 'js/draft.js')}}"></script>  
{% endblock %} 